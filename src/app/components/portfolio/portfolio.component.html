<div class="portfolio-container">
  <h1 class="title" @fadeIn>Portfolio</h1>

  <p class="intro-text" @fadeIn>
    I specialize in engineering high-performance, scalable solutions for the complex world of FinTech and core banking. This portfolio is a curated collection of my work, showcasing projects where I've leveraged technologies like Java, Spring Boot, and Angular to solve real-world problems. From enterprise-level systems to personal creations, each item demonstrates a commitment to clean code, robust architecture, and impactful results.
  </p>

  <div class="filter-buttons" @fadeIn>
    <button
      *ngFor="let category of categories"
      [class.active]="selectedCategory === category"
      (click)="filterProjects(category)">
      {{ category }}
    </button>
  </div>

  <div *ngIf="selectedCategory === 'ALL'">
    <ng-container *ngFor="let category of categories">
      <ng-container *ngIf="category !== 'ALL' && getItemsByCategory(category).length > 0">
        <h2 class="section-title">{{ category | titlecase }}</h2>
        <div class="items-grid" [@listAnimation]="getItemsByCategory(category).length">
          <ng-container *ngFor="let item of getItemsByCategory(category)">
            <ng-container [ngSwitch]="item.type">
              <ng-container *ngSwitchCase="'DEVELOPMENT'" [ngTemplateOutlet]="projectCard" [ngTemplateOutletContext]="{$implicit: item}"></ng-container>
              <ng-container *ngSwitchCase="'PRODUCT'" [ngTemplateOutlet]="projectCard" [ngTemplateOutletContext]="{$implicit: item}"></ng-container>
              <ng-container *ngSwitchCase="'RECOGNITION'" [ngTemplateOutlet]="recognitionCard" [ngTemplateOutletContext]="{$implicit: item}"></ng-container>
              <ng-container *ngSwitchCase="'BOOK'" [ngTemplateOutlet]="bookCard" [ngTemplateOutletContext]="{$implicit: item}"></ng-container>
            </ng-container>
          </ng-container>
        </div>
      </ng-container>
    </ng-container>
  </div>

  <div *ngIf="selectedCategory !== 'ALL'" class="items-grid" [@listAnimation]="filteredItems.length">
    <ng-container *ngFor="let item of filteredItems">
      <ng-container [ngSwitch]="item.type">
        <ng-container *ngSwitchCase="'DEVELOPMENT'" [ngTemplateOutlet]="projectCard" [ngTemplateOutletContext]="{$implicit: item}"></ng-container>
        <ng-container *ngSwitchCase="'PRODUCT'" [ngTemplateOutlet]="projectCard" [ngTemplateOutletContext]="{$implicit: item}"></ng-container>
        <ng-container *ngSwitchCase="'RECOGNITION'" [ngTemplateOutlet]="recognitionCard" [ngTemplateOutletContext]="{$implicit: item}"></ng-container>
        <ng-container *ngSwitchCase="'BOOK'" [ngTemplateOutlet]="bookCard" [ngTemplateOutletContext]="{$implicit: item}"></ng-container>
      </ng-container>
    </ng-container>
  </div>
</div>

<ng-template #projectCard let-item>
  <mat-card class="item-card">
    <div class="card-image-container">
      <img [src]="item.image" [alt]="item.title">
      <button mat-icon-button class="view-image-btn" (click)="openImageViewer(item.image, item.title)">
        <mat-icon>fullscreen</mat-icon>
      </button>
    </div>
    <mat-card-content>
      <h3>{{ item.title }}</h3>
      <p class="card-description">{{ item.description }}</p>
      <div class="technologies">
        <mat-icon class="tech-icon">code</mat-icon>
        <div class="tech-tags">
          <span class="tech-tag" *ngFor="let tech of item.technologies">{{ tech }}</span>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</ng-template>

<ng-template #recognitionCard let-item>
  <mat-card class="item-card">
    <div class="card-image-container">
      <img [src]="item.image" [alt]="item.title">
      <button mat-icon-button class="view-image-btn" (click)="openImageViewer(item.image, item.title)">
        <mat-icon>fullscreen</mat-icon>
      </button>
    </div>
    <mat-card-content>
      <div class="card-header">
        <h3>{{ item.title }}</h3>
        <span class="date-badge">{{ item.date }}</span>
      </div>
      <div class="meta-info">
        <mat-icon>business</mat-icon>
        <span>{{ item.organization }}</span>
      </div>
      <p class="card-description">{{ item.description }}</p>
    </mat-card-content>
  </mat-card>
</ng-template>

<ng-template #bookCard let-item>
  <mat-card class="item-card">
    <div class="card-image-container book-image">
      <img [src]="item.image" [alt]="item.title">
      <button mat-icon-button class="view-image-btn" (click)="openImageViewer(item.image, item.title)">
        <mat-icon>fullscreen</mat-icon>
      </button>
    </div>
    <mat-card-content>
      <div class="card-header">
        <h3>{{ item.title }}</h3>
        <span class="date-badge">{{ item.readDate }}</span>
      </div>
      <div class="meta-info">
        <mat-icon>person</mat-icon>
        <span>{{ item.author }}</span>
      </div>
      <div class="book-rating">
        <mat-icon *ngFor="let star of [1,2,3,4,5]" [class.filled]="star <= item.rating">star</mat-icon>
      </div>
      <div class="book-review">
        <mat-icon>format_quote</mat-icon>
        <p>{{ item.review }}</p>
      </div>
    </mat-card-content>
  </mat-card>
</ng-template>